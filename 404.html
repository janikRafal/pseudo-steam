<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>SPA Redirect</title>
    <script type="text/javascript">
      // Liczba segmentów do zachowania (0 dla repozytorium projektu)
      var pathSegmentsToKeep = 0;

      var l = window.location;
      var path = l.pathname.slice(1).split("/");

      // Sprawdzamy, czy już przekierowaliśmy użytkownika (zapobiega pętli)
      if (path[0] !== "?") {
        var newUrl =
          l.protocol +
          "//" +
          l.hostname +
          (l.port ? ":" + l.port : "") +
          l.pathname
            .split("/")
            .slice(0, 1 + pathSegmentsToKeep)
            .join("/") +
          "/?/" +
          path.slice(pathSegmentsToKeep).join("/").replace(/&/g, "~and~") +
          (l.search ? "&" + l.search.slice(1).replace(/&/g, "~and~") : "") +
          l.hash;

        // Przekierowanie użytkownika tylko raz
        window.location.replace(newUrl);
      }
    </script>
  </head>
  <body></body>
</html>
